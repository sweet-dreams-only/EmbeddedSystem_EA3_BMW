
/*******************************************************************************
**
**  This file was generated. Do not modify!
**
**  SRC-MODULE        : SysTimeClient_Wrapper.h
**
**  Copyright (C) BMW Group 2011
**
**  TARGET            : All
**
**  PROJECT           : BMW Autosar Core
**
**  AUTHOR            : EB Automotive
**
**  PURPOSE           : Wrapper module for the SysTimeClient,
**                      interface to BAC without RTE, BAC with RTE
**
**  GENERATOR         : artt 2.0.2.0
**
**  CONFIGURATION FILE: SysTimeClient
**
**  GENERATION TIME   : 03.04.2012 10:04:11 !!!IGNORE-LINE!!!
**
*******************************************************************************/

/*******************************************************************************
**                      Author Identity                                       **
********************************************************************************
**                                                                            **
** Initials     Name                       Company                            **
** --------     -------------------------  ---------------------------------- **
** mani         Markus Nirschl             EB Automotive                      **
** dare         Daniel Reiss               EB Automotive                      **
** hauf         Andreas Hauf               EB Automotive                      **
** rois         Roman Iseler               EB Automotive                      **
** olho         Oliver Hoeft               EB Automotive                      **
** bemo         Benjamin Moenius           EB Automotive                      **
**                                                                            **
*******************************************************************************/

/*******************************************************************************
**                      Revision Control History                              **
*******************************************************************************/

/*
 * V1.6.5: 06.10.2011, bemo: CR71150: add missing section mapping of
 *                                    Rte_COMCbk_SysTimeClientIndicationFlag
 * V1.6.4: 23.08.2011, olho: CR71006: Replaced Xp.ModuleConf by
 *                                    Xp.ModuleConfAtDefRefTo
 *         08.09.2011, olho: CR71032: corrected void casts
 * V1.6.3: 07.06.2011, olho: CR70903: Added critical section mapping
 * V1.6.2: 30.03.2011, olho: CR71019: Checked with MISRA 2004
 * V1.6.1: 21.05.2010, olho: CR70663: SysTimeClient uses wrong name of ComM
 *                                    ModeDeclarationGroup
 * V1.6.0: 23.03.2010, rois: CR70585: Use BMWAutosarCoreVersion to check for the
 *                                    correct Autosar version
 * V1.5.0: 26.11.2009, mani: CR70410: adapt to SWS version 1.3, remove SC6 parts
 * V1.4.1: 19.10.2009, mani: BSCSYSTIME-39: correct names of version macros
 *                     hauf: CR70379: moved assert checks to verify.tt file
 * V1.4.0: 26.01.2009, dare: CR70149: adapted to ComM API
 * V1.3.0: 10.11.2008, mani: adapt ComM interfaces for "SC7withoutRTE"
 * V1.2.0: 05.02.2008, mani: reworked after review
 *                           environment dependent parts generated by tresos
 * V1.1.0: 21.12.2007, mani: adaptions for RTE usage
 *                           add version dependent configuration from
 *                           SysTimeClient_Cfg.h
 * V1.0.0: 30.11.2007, mani: initial version
 */

/*******************************************************************************
**                      MISRA comments                                        **
*******************************************************************************/

/* Misra-C:2004 Deviation List:
  *
  * MISRA-1) Deviated Rule: 19.7 (advisory)
  *   A function should be used in preference to a function-like macro.
  *
  *   Reason:
  *   As the function is called very often and consists only of a one line
  *   the macro based implmentation is more run time efficient.
  */


#ifndef SYSTIMECLIENT_WRAPPER_H
#define SYSTIMECLIENT_WRAPPER_H

/*******************************************************************************
**  !! THIS FILE WAS GENERATED FOR ENVIRONMENT "3.0 without RTE"  !!
*******************************************************************************/

/*******************************************************************************
**                      Include Section                                       **
*******************************************************************************/
#include "Std_Types.h"         /* include AUTOSAR types                       */
#include "SysTimeClient_Cfg.h" /* SysTimeClient configuration file            */

#include "Std_Types.h"         /* include AUTOSAR types                       */

#include "Dem.h"               /* DEM specific include                        */
#include "ComM.h"              /* detection of bus activ mode                 */
#include "Com.h"               /* for receiving the time signal               */
#include "SchM_SysTimeClient.h" /* for critical section implementation        */

/*******************************************************************************
**                      Global Macros                                         **
*******************************************************************************/

/**** Version Macros ****/
#define SYSTIMECLIENT_WRAPPER_MAJOR_VERSION 2u
#define SYSTIMECLIENT_WRAPPER_MINOR_VERSION 1u
#define SYSTIMECLIENT_WRAPPER_PATCH_VERSION 5u

/*******************************************************************************
**                      Internal Configuration                                **
*******************************************************************************/
/*
 * indication flag of new message for SysTimeClient
 */
#define SYSTIMECLIENT_MSG_IND_FLAG (Rte_COMCbk_SysTimeClientIndicationFlag)

/*
 * check if indication flag was set
 */
#define SYSTIMECLIENT_IND_FLAG_SET()  ( (SYSTIMECLIENT_MSG_IND_FLAG) == TRUE )

/*
 * reset indication flag
 */
#define SYSTIMECLIENT_RES_IND_FLAG()  do{\
                                         (SYSTIMECLIENT_MSG_IND_FLAG) = FALSE;\
                                        }while(0)



/*******************************************************************************
**                      Mapping of external API                               **
*******************************************************************************/

/**********************************
 * API to receive the time signal *
 **********************************/
#define SysTimeClient_ReceiveSignal() SysTimeClient_ReceiveSignal_Wrapper()


/*******************************
 * API to set the event status *
 *******************************/

#define SYSTIMECLIENT_STATUS_PASSED     DEM_EVENT_STATUS_PASSED
#define SYSTIMECLIENT_STATUS_FAILED     DEM_EVENT_STATUS_FAILED
#define SYSTIMECLIENT_STATUS_PREPASSED  DEM_EVENT_STATUS_PREPASSED
#define SYSTIMECLIENT_STATUS_PREFAILED  DEM_EVENT_STATUS_PREFAILED

/* Deviation MISRA-1 */
#define SysTimeClient_SetEventStatus(EventStatus)  Dem_ReportErrorStatus(SysTimeClientDemEventId, EventStatus)

/**************************************
 * API to enter/exit critical section *
 **************************************/
#define SysTimeClient_EnterCriticalSection()   SchM_Enter_SysTimeClient(SCHM_SYSTIMECLIENT_EXCLUSIVE_AREA_0)
#define SysTimeClient_ExitCriticalSection()    SchM_Exit_SysTimeClient(SCHM_SYSTIMECLIENT_EXCLUSIVE_AREA_0)

/***************************************
 * API to retreive the bus sleep state *
 ***************************************/
/* values of BusStateType */
#define SYSTIMECLIENT_BUS_AWAKE    0x00U
#define SYSTIMECLIENT_BUS_SLEEP    0x01U
#define SYSTIMECLIENT_BUS_ERROR    0xFFU

#define BusStateType uint8

/* values of SysTimeClient_ComModeType */
#define SYSTIMECLIENT_FULL_COMMUNICATION    COMM_FULL_COMMUNICATION
#define SYSTIMECLIENT_SILENT_COMMUNICATION  COMM_SILENT_COMMUNICATION
#define SYSTIMECLIENT_NO_COMMUNICATION      COMM_NO_COMMUNICATION

typedef ComM_ModeType SysTimeClient_ComModeType;

/* Deviation MISRA-1 */
#define SysTimeClient_GetCurrentComMode(pBusState)  SysTimeClient_GetCurrentComMode_Wrapper(pBusState)

/*******************************************************************************
**                      Global Data                                           **
*******************************************************************************/

#define SYSTIMECLIENT_START_SEC_VAR_UNSPECIFIED
#include "MemMap.h"

extern VAR(boolean, SYSTIMECLIENT_VAR) Rte_COMCbk_SysTimeClientIndicationFlag;
/* NXTR PATCH START
 * Added: 20Sep13
 * Added By: K. Smith
 * Reason: Indication flag is cleared after the message is processed. This can
 * cause some errors with other modules that are trying to see if a new
 * message was received. The variable added is a one time set for the ignition
 * cycle, no other changes were made to the SysTimeClien.*/
extern VAR(boolean, SYSTIMECLIENT_VAR) NxtrPatch_SysTimeClientIndicationFlag;
/* NEXTER PATCH END */

#define SYSTIMECLIENT_STOP_SEC_VAR_UNSPECIFIED
#include "MemMap.h"


/*******************************************************************************
**                      Global Function Prototypes                            **
*******************************************************************************/

#define SYSTIMECLIENT_START_SEC_CODE
#include "MemMap.h"

extern FUNC(uint32, SYSTIMECLIENT_PUBLIC_CODE) SysTimeClient_ReceiveSignal_Wrapper(void);
extern FUNC(void, SYSTIMECLIENT_PUBLIC_CODE) SysTimeClient_GetCurrentComMode_Wrapper
(
   P2VAR(BusStateType, AUTOMATIC, SYSTIMECLIENT_VAR) pBusState
);
extern FUNC(void, SYSTIMECLIENT_PUBLIC_CODE) Rte_COMCbk_Com_T_SEC_COU_REL__RELATIVZEIT(void);

#define SYSTIMECLIENT_STOP_SEC_CODE
#include "MemMap.h"


#endif /* SYSTIMECLIENT_WRAPPER_H */

/*** End of file **************************************************************/
